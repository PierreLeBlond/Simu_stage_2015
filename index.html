<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Data modeling</title>
	<link rel="stylesheet" href="index.css">
	<link rel="stylesheet" href="css/timeline.css">
	<script type="text/javascript" src="lib/stats.min.js"></script>
	<script type="text/javascript" src="lib/dat.gui.min.js"></script>

	<script type="text/javascript" src="lib/three.js"></script>

	<script type="text/javascript" src="lib/OrbitControls.js"></script>
	<script type="text/javascript" src="lib/FirstPersonControls.js"></script>

	<script type="text/javascript" src="lib/async.js"></script>

	<!-- Cardboard dependencies -->
	<script type="text/javascript" src="lib/StereoEffect.js"></script>
	<script type="text/javascript" src="lib/DeviceOrientationControls.js"></script>


</head>
<body>
<div id="loader">
	<input type="file" accept="*" id="files" name="file" multiple />
	<!--<input type="file" accept="*" id="endFile" name="endFile" multiple />-->
	<!--<div id="progress_bar"><div id="percent">0%</div></div>
-->
</div>
<div id="info_wrapper">
	<div id="info_intersected">

	</div>
	<div id="info_selected">

	</div>
</div>

<script type="x-shader/x-vertex" id="animatedfogvertexshader">
			uniform float size;
	        uniform float t;

	        attribute vec3 endPosition;
	        attribute vec3 color;

	        varying vec4 mvPosition;
	        varying vec3 color_out;

	        void main() {

	        	color_out = color;

	        	vec3 pos = position+endPosition*t;

	            mvPosition = modelViewMatrix * vec4( pos, 1.0 );

	            gl_PointSize = size / length( mvPosition.xyz );

	            gl_Position = projectionMatrix * mvPosition;

	        }

		</script>

<script type="x-shader/x-vertex" id="animatedvertexshader">
			uniform float size;
	        uniform float t;

	        attribute vec3 endPosition;
	        attribute vec3 color;

	        varying vec3 color_out;

	        void main() {

	        	color_out = color;

	        	vec3 pos = position+endPosition*t;

	            vec4 mvPosition = modelViewMatrix * vec4( pos, 1.0 );

	            gl_PointSize = size / length( mvPosition.xyz );

	            gl_Position = projectionMatrix * mvPosition;

	        }

		</script>

<script type="x-shader/x-vertex" id="colorpickingvertexshader">
	uniform float size;
	uniform float t;

	attribute vec3 endPosition;
	attribute vec3 colorIndex;

	varying vec4 mvPosition;
	varying vec3 color_out;

	void main() {

	        	color_out = colorIndex;

	        	vec3 pos = position+endPosition*t;

	            mvPosition = modelViewMatrix * vec4( pos, 1.0 );

	            gl_PointSize = size / length( mvPosition.xyz );

	            gl_Position = projectionMatrix * mvPosition;

	        }
</script>

<script type="x-shader/x-fragment" id="fragmentshader">

			uniform sampler2D map;

			varying vec3 color_out;

			void main() {
				vec4 diffuse = texture2D(map, gl_PointCoord);
				vec4 color = vec4(color_out, 1.0);
				gl_FragColor = color * diffuse;
			}

		</script>

<script type="x-shader/x-fragment" id="fogfragmentshader">
			uniform float fog;
			uniform float fogDistance;
			uniform float scale;
			uniform sampler2D map;

			varying vec4 mvPosition;
			varying vec3 color_out;

			void main() {
				vec4 diffuse = texture2D(map, gl_PointCoord);
				vec4 color = mix(vec4(color_out, 1.0), vec4(0.0),1.0 - fogDistance*1.0/(exp(pow(length(mvPosition)*fog, 2.0))));
				gl_FragColor = color * diffuse;
			}

		</script>

<script type="x-shader/x-vertex" id="staticfogvertexshader">
			uniform float size;
			uniform float scale;

	        attribute vec3 color;

	        varying vec4 mvPosition;
	        varying vec3 color_out;

	        void main() {

	        	color_out = color;

	            mvPosition = modelViewMatrix * vec4( position, 1.0 );

	            gl_PointSize = size / length( mvPosition.xyz );

	            gl_Position = projectionMatrix * mvPosition;

	        }
</script>

<script type="x-shader/x-vertex" id="staticvertexshader">
			uniform float size;
			uniform float scale;

	        attribute vec3 color;

	        varying vec3 color_out;

	        void main() {

	        	color_out = color;

	            vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );

	            gl_PointSize = size / length( mvPosition.xyz );

	            gl_Position = projectionMatrix * mvPosition;

	        }
</script>

<script type="x-shader/x-fragment" id="colorpickingfragmentshader">
	varying vec4 mvPosition;
	varying vec3 color_out;

	void main(){
		gl_FragColor = vec4(color_out/255.0, 1.0);
		}
</script>

<div id="timeline">
	<div id="cursor"></div>
	<div class="snapshot" id="s_1"></div>
	<div class="snapshot" id="s_2"></div>
	<div id="progress"></div>
</div>

<!-- TOOLS -->
<div id="tools">
	<img src="resources/icons/fps_controls.png" onclick="useFPSControls()" title="Fly Camera"/>
	<img src="resources/icons/orbit_controls.png" onclick="useOrbitControls()" title="Orbit Controls"/>
	<img src="resources/icons/focus.png" onclick="controls.reset()" title="focus on pointcloud"/>
</div>

<div id="debugInfo">

</div>

<div id="colorPickingTexture"></div>

</body>

<script type="text/javascript" src="js/app.js"></script>
<script type="text/javascript" src="js/script.js"></script>
<script type="text/javascript" src="js/shader.js"></script>
<script type="text/javascript" src="js/colorPicking.js"></script>
<script type="text/javascript" src="js/reader.js"></script>
<script type="text/javascript" src="js/raycasting.js"></script>
<script type="text/javascript" src="js/camera.js"></script>
<script type="text/javascript" src="js/gui.js"></script>
<script type="text/javascript" src="js/setup.js"></script>
<script type="text/javascript" src="js/util.js"></script>
<script type="text/javascript" src="js/event.js"></script>
<script type="text/javascript" src="js/main.js"></script>




</html>